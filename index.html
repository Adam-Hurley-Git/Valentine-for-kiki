<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Be My Valentine üíò</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Playfair+Display:wght@500;600;700&family=Poppins:wght@300;400;500&family=Great+Vibes&display=swap" rel="stylesheet">

  <!-- Swiper -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

  <!-- AOS -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" />

  <!-- GLightbox -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css" />

  <!-- Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <style>
    :root {
      --pink-soft: #ff9a9e;
      --pink-hot: #ff4d6d;
      --pink-blush: #ff6b8a;
      --purple-soft: #a18cd1;
      --lavender: #fbc2eb;
      --peach: #fad0c4;
      --cream: #fff9f0;
      --rose-gold: #b76e79;
      --gold: #d4a574;
      --gold-light: #f0d9b5;
      --text-dark: #4a1c2f;
      --text-medium: #6b4c5a;
      --glass-bg: rgba(255, 255, 255, 0.75);
      --glass-bg-strong: rgba(255, 255, 255, 0.88);
      --font-display: 'Playfair Display', serif;
      --font-body: 'Poppins', sans-serif;
      --font-handwritten: 'Dancing Script', cursive;
      --font-elegant: 'Great Vibes', cursive;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
      background-size: 400% 400%;
      animation: bgMove 12s ease infinite;
      font-family: var(--font-body);
      overflow: hidden;
    }

    body.experience-mode {
      display: block;
      overflow-y: auto;
      overflow-x: hidden;
      align-items: initial;
      justify-content: initial;
    }

    @keyframes bgMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* ============================================
       SCROLL PROGRESS BAR
       ============================================ */
    .scroll-progress {
      position: fixed;
      top: 0;
      left: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--pink-hot), var(--lavender), var(--purple-soft), var(--pink-hot));
      background-size: 300% 100%;
      animation: progressShimmer 3s linear infinite;
      z-index: 10000;
      transition: width 0.1s linear;
      box-shadow: 0 0 10px rgba(255, 77, 109, 0.5);
      display: none;
    }

    @keyframes progressShimmer {
      0% { background-position: 0% 50%; }
      100% { background-position: 300% 50%; }
    }

    /* ============================================
       SCREEN FLASH OVERLAY
       ============================================ */
    .screen-flash {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at center, rgba(255,255,255,0.95), rgba(255,182,193,0.8));
      z-index: 9998;
      opacity: 0;
      pointer-events: none;
    }

    .screen-flash--active {
      animation: screenFlash 1.2s ease-out forwards;
    }

    @keyframes screenFlash {
      0% { opacity: 0; }
      15% { opacity: 1; }
      100% { opacity: 0; }
    }

    /* ============================================
       PROPOSAL CARD
       ============================================ */
    .card {
      width: min(92%, 420px);
      padding: 40px 30px 45px;
      background: var(--glass-bg);
      backdrop-filter: blur(18px);
      border-radius: 28px;
      text-align: center;
      box-shadow:
        0 30px 80px rgba(0,0,0,0.25),
        inset 0 0 0 1px rgba(255,255,255,0.4);
      position: relative;
      animation: cardIn 1.1s ease;
      z-index: 10;
    }

    @keyframes cardIn {
      from { opacity: 0; transform: translateY(30px) scale(0.95); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .card--exit {
      animation: cardExit 700ms ease forwards;
    }

    @keyframes cardExit {
      to {
        opacity: 0;
        transform: translateY(-40px) scale(0.85);
      }
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -2px;
      border-radius: 30px;
      background: linear-gradient(120deg, #ff4d6d, #ff9a9e, #fbc2eb);
      z-index: -1;
      filter: blur(20px);
      opacity: 0.7;
    }

    .emoji {
      font-size: 68px;
      margin-bottom: 12px;
      animation: heartbeat 1.8s infinite;
    }

    @keyframes heartbeat {
      0%,100% { transform: scale(1); }
      25% { transform: scale(1.08); }
      50% { transform: scale(1); }
      75% { transform: scale(1.12); }
    }

    .card h2 {
      font-family: var(--font-display);
      font-size: 28px;
      color: var(--text-dark);
      margin-bottom: 30px;
      line-height: 1.35;
    }

    .buttons {
      position: relative;
      height: 78px;
    }

    .card button {
      position: absolute;
      padding: 14px 36px;
      border-radius: 40px;
      border: none;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.25s ease;
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
      font-family: var(--font-body);
    }

    .card button:active {
      transform: scale(0.94);
    }

    #yes {
      left: 12%;
      background: linear-gradient(135deg, #ff4d6d, #ff758f);
      color: #fff;
      box-shadow: 0 15px 35px rgba(255,77,109,0.55);
    }

    #yes:hover {
      transform: translateY(-3px);
      box-shadow: 0 20px 40px rgba(255,77,109,0.7);
    }

    #no {
      left: 55%;
      background: rgba(255,255,255,0.9);
      color: #777;
    }

    .hint {
      margin-top: 28px;
      font-size: 13px;
      color: #6b6b6b;
      font-style: italic;
    }

    /* ============================================
       FLOATING HEARTS (background)
       ============================================ */
    .heart {
      position: fixed;
      bottom: -20px;
      animation: floatUp linear forwards;
      pointer-events: none;
      filter: blur(0.3px);
      z-index: 0;
    }

    @keyframes floatUp {
      from {
        transform: translateY(0) scale(1) rotate(0deg);
        opacity: 1;
      }
      to {
        transform: translateY(-120vh) scale(1.8) rotate(20deg);
        opacity: 0;
      }
    }

    /* ============================================
       EXPERIENCE WRAPPER
       ============================================ */
    .experience {
      display: none;
      opacity: 0;
      width: 100%;
    }

    .experience--active {
      display: block;
      animation: experienceIn 1400ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    @keyframes experienceIn {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ============================================
       SHARED SECTION STYLES
       ============================================ */
    .section-title {
      font-family: var(--font-display);
      font-size: clamp(28px, 5vw, 42px);
      color: var(--text-dark);
      text-align: center;
      margin-bottom: 8px;
      position: relative;
    }

    .section-subtitle {
      font-family: var(--font-handwritten);
      font-size: clamp(18px, 3vw, 24px);
      color: var(--text-medium);
      text-align: center;
      margin-bottom: 40px;
    }

    .section-divider {
      text-align: center;
      font-size: 14px;
      margin: 0 auto 36px;
      letter-spacing: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      color: var(--rose-gold);
    }

    .section-divider::before,
    .section-divider::after {
      content: '';
      height: 1px;
      width: 60px;
      background: linear-gradient(90deg, transparent, var(--rose-gold), transparent);
    }

    /* ============================================
       SECTION: HERO
       ============================================ */
    .section-hero {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 60px 20px;
      position: relative;
      z-index: 1;
      overflow: hidden;
    }

    /* Floating particles canvas behind hero */
    .hero-particles {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 0;
    }

    .hero-content {
      text-align: center;
      margin-bottom: 48px;
      position: relative;
      z-index: 1;
    }

    .hero-badge {
      display: inline-block;
      background: rgba(255,255,255,0.25);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.4);
      border-radius: 50px;
      padding: 8px 24px;
      font-family: var(--font-body);
      font-size: 13px;
      font-weight: 500;
      color: white;
      letter-spacing: 2px;
      text-transform: uppercase;
      margin-bottom: 24px;
      text-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }

    .hero-title {
      font-family: var(--font-elegant);
      font-size: clamp(42px, 10vw, 80px);
      color: white;
      text-shadow: 0 4px 30px rgba(0,0,0,0.15), 0 1px 3px rgba(0,0,0,0.1);
      margin-bottom: 16px;
      line-height: 1.1;
    }

    .hero-subtitle {
      font-family: var(--font-handwritten);
      font-size: clamp(20px, 4vw, 30px);
      color: rgba(255,255,255,0.92);
      text-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-bottom: 24px;
    }

    .hero-heart-divider {
      font-size: 28px;
      animation: heartbeat 1.8s infinite;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
    }

    .hero-heart-divider::before,
    .hero-heart-divider::after {
      content: '';
      height: 1px;
      width: 50px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
    }

    .hero-photo-frame {
      width: min(85%, 480px);
      border-radius: 28px;
      overflow: hidden;
      position: relative;
      z-index: 1;
      box-shadow:
        0 25px 80px rgba(0,0,0,0.25),
        0 0 0 3px rgba(255,255,255,0.5),
        0 0 0 6px rgba(255,255,255,0.2);
      transform: rotate(-2deg);
      transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .hero-photo-frame:hover {
      transform: rotate(0deg) scale(1.03);
    }

    .hero-photo-frame::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, transparent 60%, rgba(0,0,0,0.15));
      pointer-events: none;
      border-radius: 28px;
    }

    .hero-main-photo {
      width: 100%;
      height: auto;
      display: block;
      aspect-ratio: 4/3;
      object-fit: cover;
      background: linear-gradient(135deg, var(--lavender), var(--peach));
    }

    .scroll-hint {
      position: absolute;
      bottom: 32px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      animation: scrollHintFloat 2s ease-in-out infinite;
      z-index: 1;
    }

    .scroll-hint span {
      font-family: var(--font-body);
      font-size: 12px;
      color: rgba(255,255,255,0.7);
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .scroll-hint-arrow {
      width: 20px;
      height: 20px;
      border-right: 2px solid rgba(255,255,255,0.6);
      border-bottom: 2px solid rgba(255,255,255,0.6);
      transform: rotate(45deg);
    }

    @keyframes scrollHintFloat {
      0%, 100% { transform: translateX(-50%) translateY(0); opacity: 1; }
      50% { transform: translateX(-50%) translateY(10px); opacity: 0.5; }
    }

    /* ============================================
       SECTION: TIMELINE
       ============================================ */
    .section-timeline {
      padding: 80px 20px;
      position: relative;
      z-index: 1;
    }

    .timeline {
      max-width: 700px;
      margin: 0 auto;
      position: relative;
      padding: 20px 0;
    }

    .timeline::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 2px;
      height: 100%;
      background: linear-gradient(to bottom, transparent, var(--pink-hot), var(--lavender), var(--purple-soft), transparent);
    }

    .timeline-item {
      display: flex;
      align-items: center;
      margin-bottom: 48px;
      position: relative;
    }

    .timeline-item:nth-child(odd) {
      flex-direction: row-reverse;
    }

    .timeline-dot {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--pink-hot), var(--lavender));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      box-shadow: 0 4px 20px rgba(255,77,109,0.35);
      z-index: 2;
      border: 3px solid white;
    }

    .timeline-card {
      width: calc(50% - 48px);
      background: var(--glass-bg-strong);
      backdrop-filter: blur(16px);
      border-radius: 20px;
      padding: 24px 28px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.08);
      border: 1px solid rgba(255,255,255,0.5);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .timeline-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 16px 48px rgba(0,0,0,0.12);
    }

    .timeline-date {
      font-family: var(--font-body);
      font-size: 12px;
      font-weight: 500;
      color: var(--pink-hot);
      letter-spacing: 1.5px;
      text-transform: uppercase;
      margin-bottom: 6px;
    }

    .timeline-title {
      font-family: var(--font-display);
      font-size: 18px;
      color: var(--text-dark);
      margin-bottom: 8px;
    }

    .timeline-text {
      font-family: var(--font-handwritten);
      font-size: 17px;
      color: var(--text-medium);
      line-height: 1.5;
    }

    /* ============================================
       SECTION: CAROUSEL (Swiper)
       ============================================ */
    .section-carousel {
      padding: 80px 20px;
      position: relative;
      z-index: 1;
      max-width: 900px;
      margin: 0 auto;
    }

    .hero-swiper {
      padding: 40px 0 60px;
      overflow: hidden;
    }

    .hero-swiper .swiper-slide {
      border-radius: 24px;
      overflow: hidden;
      background: white;
      box-shadow: 0 8px 32px rgba(0,0,0,0.10);
      transition: transform 0.5s ease, box-shadow 0.5s ease, opacity 0.5s ease;
      border: 1px solid rgba(255,255,255,0.6);
      opacity: 0.5;
      transform: scale(0.88);
    }

    .hero-swiper .swiper-slide-active {
      box-shadow: 0 20px 60px rgba(255,77,109,0.2);
      opacity: 1;
      transform: scale(1);
    }

    .hero-swiper .swiper-slide img {
      width: 100%;
      height: 360px;
      object-fit: cover;
      display: block;
      background: linear-gradient(135deg, var(--lavender), var(--peach));
      transition: transform 0.5s ease;
    }

    .hero-swiper .swiper-slide-active:hover img {
      transform: scale(1.05);
    }

    .slide-caption {
      font-family: var(--font-handwritten);
      font-size: 19px;
      color: var(--text-medium);
      text-align: center;
      padding: 18px 16px;
      position: relative;
    }

    .slide-caption::before {
      content: '‚ú¶';
      position: absolute;
      top: 8px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 8px;
      color: var(--pink-soft);
    }

    .swiper-pagination-bullet {
      width: 10px !important;
      height: 10px !important;
      transition: all 0.3s ease !important;
    }

    .swiper-pagination-bullet-active {
      background: var(--pink-hot) !important;
      width: 28px !important;
      border-radius: 5px !important;
    }

    .swiper-button-prev,
    .swiper-button-next {
      width: 44px !important;
      height: 44px !important;
      background: rgba(255,255,255,0.85) !important;
      backdrop-filter: blur(8px);
      border-radius: 50% !important;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
    }

    .swiper-button-prev:hover,
    .swiper-button-next:hover {
      background: white !important;
      box-shadow: 0 6px 24px rgba(255,77,109,0.2);
      transform: scale(1.1);
    }

    .swiper-button-prev::after,
    .swiper-button-next::after {
      font-size: 18px !important;
      color: var(--pink-hot) !important;
      font-weight: bold !important;
    }

    /* ============================================
       SECTION: POLAROID GRID
       ============================================ */
    .section-memories {
      padding: 80px 20px;
      position: relative;
      z-index: 1;
    }

    .polaroid-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 36px;
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .polaroid {
      background: white;
      padding: 14px 14px 52px 14px;
      border-radius: 6px;
      box-shadow:
        0 4px 20px rgba(0,0,0,0.08),
        0 1px 3px rgba(0,0,0,0.06);
      transform: rotate(var(--rotate, 0deg));
      transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.4s ease;
      cursor: pointer;
      position: relative;
    }

    .polaroid:hover {
      transform: rotate(0deg) translateY(-12px) scale(1.02);
      box-shadow: 0 24px 56px rgba(0,0,0,0.16);
    }

    /* Tape decoration */
    .polaroid::before {
      content: '';
      position: absolute;
      top: -8px;
      left: 50%;
      transform: translateX(-50%) rotate(var(--tape-rotate, -2deg));
      width: 60px;
      height: 22px;
      background: rgba(255, 235, 200, 0.7);
      border-radius: 2px;
      z-index: 2;
      box-shadow: 0 1px 4px rgba(0,0,0,0.06);
    }

    .polaroid a {
      display: block;
      overflow: hidden;
      border-radius: 3px;
    }

    .polaroid img {
      width: 100%;
      aspect-ratio: 1;
      object-fit: cover;
      border-radius: 3px;
      display: block;
      background: linear-gradient(135deg, var(--lavender), var(--peach));
      transition: transform 0.5s ease;
    }

    .polaroid:hover img {
      transform: scale(1.08);
    }

    .polaroid-caption {
      font-family: var(--font-handwritten);
      font-size: 18px;
      color: var(--text-medium);
      text-align: center;
      margin-top: 14px;
    }

    /* ============================================
       SECTION: REASONS I LOVE YOU
       ============================================ */
    .section-reasons {
      padding: 80px 20px;
      position: relative;
      z-index: 1;
    }

    .reasons-grid {
      max-width: 900px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 24px;
      padding: 0 20px;
    }

    .reason-card {
      background: var(--glass-bg-strong);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255,255,255,0.5);
      border-radius: 20px;
      padding: 32px 24px;
      text-align: center;
      transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.4s ease;
      position: relative;
      overflow: hidden;
    }

    .reason-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--pink-hot), var(--lavender), var(--purple-soft));
    }

    .reason-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 20px 48px rgba(255,77,109,0.15);
    }

    .reason-emoji {
      font-size: 40px;
      margin-bottom: 16px;
      display: block;
    }

    .reason-title {
      font-family: var(--font-display);
      font-size: 17px;
      color: var(--text-dark);
      margin-bottom: 8px;
    }

    .reason-text {
      font-family: var(--font-handwritten);
      font-size: 17px;
      color: var(--text-medium);
      line-height: 1.4;
    }

    /* ============================================
       SECTION: LOVE LETTER
       ============================================ */
    .section-letter {
      padding: 80px 20px;
      display: flex;
      justify-content: center;
      position: relative;
      z-index: 1;
    }

    .letter-wrapper {
      perspective: 1000px;
      max-width: 620px;
      width: 100%;
    }

    .letter-container {
      max-width: 620px;
      width: 100%;
      background: var(--cream);
      border-radius: 12px;
      padding: 56px 44px;
      box-shadow:
        0 12px 56px rgba(0,0,0,0.1),
        0 2px 8px rgba(0,0,0,0.05),
        inset 0 0 80px rgba(200,170,140,0.08);
      position: relative;
      border: 1px solid rgba(200,170,140,0.2);
    }

    .letter-container::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background:
        repeating-linear-gradient(
          transparent,
          transparent 31px,
          rgba(200,170,140,0.12) 31px,
          rgba(200,170,140,0.12) 32px
        );
      pointer-events: none;
      border-radius: 12px;
    }

    /* Red margin line */
    .letter-container::after {
      content: '';
      position: absolute;
      top: 0; bottom: 0;
      left: 44px;
      width: 1px;
      background: rgba(220,80,80,0.15);
      pointer-events: none;
    }

    .letter-wax-seal {
      position: absolute;
      top: -20px;
      right: 30px;
      width: 56px;
      height: 56px;
      background: radial-gradient(circle at 35% 35%, #d44, #8b0000);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      box-shadow:
        0 4px 16px rgba(139,0,0,0.35),
        inset 0 -2px 6px rgba(0,0,0,0.2),
        inset 0 2px 6px rgba(255,255,255,0.15);
      z-index: 2;
      transform: rotate(-15deg);
    }

    .letter-decoration {
      text-align: center;
      font-size: 38px;
      margin-bottom: 12px;
    }

    .letter-title {
      font-family: var(--font-elegant);
      font-size: clamp(28px, 5vw, 40px);
      color: var(--text-dark);
      text-align: center;
      margin-bottom: 32px;
    }

    .letter-body {
      font-family: var(--font-handwritten);
      font-size: 20px;
      color: var(--text-dark);
      line-height: 2;
      position: relative;
      z-index: 1;
    }

    .letter-body p {
      margin-bottom: 16px;
    }

    .letter-body .letter-greeting {
      font-size: 24px;
      font-weight: 600;
      color: var(--pink-hot);
    }

    .letter-signature {
      margin-top: 28px;
      font-size: 24px;
      font-weight: 600;
      color: var(--rose-gold);
    }

    /* ============================================
       SECTION: PROMISE / CTA
       ============================================ */
    .section-promise {
      padding: 100px 20px;
      text-align: center;
      position: relative;
      z-index: 1;
    }

    .promise-card {
      max-width: 550px;
      margin: 0 auto;
      background: var(--glass-bg-strong);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255,255,255,0.5);
      border-radius: 32px;
      padding: 56px 40px;
      box-shadow: 0 20px 64px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
    }

    .promise-card::before {
      content: '';
      position: absolute;
      inset: -2px;
      border-radius: 34px;
      background: linear-gradient(135deg, var(--pink-hot), var(--lavender), var(--purple-soft), var(--pink-hot));
      background-size: 300% 300%;
      animation: promiseBorderShift 6s ease infinite;
      z-index: -1;
      opacity: 0.4;
      filter: blur(1px);
    }

    @keyframes promiseBorderShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .promise-emoji {
      font-size: 52px;
      margin-bottom: 20px;
      display: block;
      animation: heartbeat 1.8s infinite;
    }

    .promise-title {
      font-family: var(--font-elegant);
      font-size: clamp(32px, 6vw, 48px);
      color: var(--text-dark);
      margin-bottom: 16px;
    }

    .promise-text {
      font-family: var(--font-handwritten);
      font-size: 22px;
      color: var(--text-medium);
      line-height: 1.6;
      margin-bottom: 32px;
    }

    .promise-hearts {
      font-size: 24px;
      letter-spacing: 8px;
      animation: heartbeat 1.8s infinite;
    }

    /* ============================================
       FOOTER
       ============================================ */
    .section-footer {
      padding: 60px 20px 48px;
      text-align: center;
      position: relative;
      z-index: 1;
    }

    .footer-hearts {
      font-size: 24px;
      letter-spacing: 10px;
      margin-bottom: 16px;
      animation: heartbeat 1.8s infinite;
    }

    .footer-text {
      font-family: var(--font-elegant);
      font-size: 26px;
      color: rgba(255,255,255,0.92);
      text-shadow: 0 2px 12px rgba(0,0,0,0.1);
      margin-bottom: 8px;
    }

    .footer-year {
      font-family: var(--font-body);
      font-size: 13px;
      color: rgba(255,255,255,0.6);
      letter-spacing: 3px;
      text-transform: uppercase;
    }

    .footer-divider {
      width: 40px;
      height: 1px;
      background: rgba(255,255,255,0.3);
      margin: 16px auto;
    }

    /* ============================================
       MUSIC TOGGLE
       ============================================ */
    .music-btn {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 52px;
      height: 52px;
      border-radius: 50%;
      border: none;
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(12px);
      font-size: 22px;
      cursor: pointer;
      box-shadow: 0 4px 24px rgba(0,0,0,0.12);
      z-index: 100;
      transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s ease;
      display: none;
      border: 1px solid rgba(255,255,255,0.4);
    }

    .music-btn:hover {
      transform: scale(1.15);
      box-shadow: 0 8px 32px rgba(255,77,109,0.25);
    }

    .music-btn.playing {
      animation: musicPulse 1.5s ease infinite;
    }

    @keyframes musicPulse {
      0%, 100% { box-shadow: 0 4px 20px rgba(255,77,109,0.3); }
      50% { box-shadow: 0 4px 36px rgba(255,77,109,0.6); }
    }

    /* ============================================
       BACK TO TOP
       ============================================ */
    .back-to-top {
      position: fixed;
      bottom: 24px;
      left: 24px;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: none;
      background: rgba(255,255,255,0.8);
      backdrop-filter: blur(10px);
      font-size: 18px;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      z-index: 100;
      display: none;
      transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease;
      border: 1px solid rgba(255,255,255,0.4);
      opacity: 0;
    }

    .back-to-top.visible {
      opacity: 1;
    }

    .back-to-top:hover {
      transform: scale(1.15) translateY(-2px);
    }

    /* ============================================
       SPARKLE CURSOR
       ============================================ */
    .sparkle {
      position: fixed;
      pointer-events: none;
      font-size: 16px;
      animation: sparkleAnim 900ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
      z-index: 9999;
    }

    @keyframes sparkleAnim {
      0% { opacity: 1; transform: scale(0.5) translateY(0) rotate(0deg); }
      50% { opacity: 1; transform: scale(1.2) translateY(-15px) rotate(180deg); }
      100% { opacity: 0; transform: scale(0.2) translateY(-40px) rotate(360deg); }
    }

    /* ============================================
       RESPONSIVE
       ============================================ */
    @media (max-width: 768px) {
      .hero-swiper .swiper-slide img {
        height: 280px;
      }

      .polaroid-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 24px;
        padding: 0 10px;
      }

      .letter-container {
        padding: 40px 28px;
      }

      .letter-container::after {
        left: 28px;
      }

      .swiper-button-prev,
      .swiper-button-next {
        display: none !important;
      }

      .timeline::before {
        left: 24px;
      }

      .timeline-item,
      .timeline-item:nth-child(odd) {
        flex-direction: row;
        padding-left: 60px;
      }

      .timeline-dot {
        left: 24px;
        width: 36px;
        height: 36px;
        font-size: 14px;
      }

      .timeline-card {
        width: 100%;
      }

      .reasons-grid {
        grid-template-columns: 1fr 1fr;
        gap: 16px;
        padding: 0 10px;
      }

      .reason-card {
        padding: 24px 16px;
      }
    }

    @media (max-width: 480px) {
      .card h2 { font-size: 23px; }
      .emoji { font-size: 58px; }
      .card button { padding: 12px 28px; font-size: 15px; }
      #yes { left: 8%; }
      #no { left: 55%; }

      .hero-swiper .swiper-slide img {
        height: 240px;
      }

      .polaroid-grid {
        grid-template-columns: 1fr;
        max-width: 300px;
        margin: 0 auto;
      }

      .letter-body {
        font-size: 18px;
      }

      .letter-container {
        padding: 32px 22px;
      }

      .letter-container::after {
        left: 22px;
      }

      .reasons-grid {
        grid-template-columns: 1fr;
        max-width: 320px;
        margin: 0 auto;
      }

      .timeline-card {
        padding: 20px;
      }
    }
  </style>
</head>

<body>

  <!-- Scroll progress bar -->
  <div class="scroll-progress" id="scrollProgress"></div>

  <!-- Screen flash overlay -->
  <div class="screen-flash" id="screenFlash"></div>

  <!-- ============================================
       PROPOSAL CARD (existing)
       ============================================ -->
  <div class="card">
    <div class="emoji">‚ù§Ô∏èü™∫ </div>
    <h2>Kiki ‚ù§Ô∏è,<br>will you be my Valentine?</h2>

    <div class="buttons">
      <button id="yes">Yes üíñ</button>
      <button id="no">No üôà</button>
    </div>

    <div class="hint">Some love stories don't allow "no" ‚ú®</div>
  </div>

  <!-- ============================================
       VALENTINE'S EXPERIENCE (hidden until Yes)
       ============================================ -->
  <div id="valentine-experience" class="experience">

    <!-- HERO -->
    <section class="section-hero" id="heroSection">
      <canvas class="hero-particles" id="heroParticles"></canvas>
      <div class="hero-content" data-aos="fade-up" data-aos-duration="1200">
        <div class="hero-badge">She said yes</div>
        <h1 class="hero-title">Our Love Story</h1>
        <p class="hero-subtitle">Every moment with you is a gift I never want to stop unwrapping</p>
        <div class="hero-heart-divider">üíï</div>
      </div>
      <div class="hero-photo-frame" data-aos="zoom-in" data-aos-delay="400" data-aos-duration="1200">
        <img src="photos/hero-1.jpg" alt="Us together" class="hero-main-photo" />
      </div>
      <div class="scroll-hint" data-aos="fade-up" data-aos-delay="1200">
        <span>Scroll</span>
        <div class="scroll-hint-arrow"></div>
      </div>
    </section>

    <!-- TIMELINE -->
    <section class="section-timeline">
      <h2 class="section-title" data-aos="fade-up">Our Journey Together</h2>
      <div class="section-divider" data-aos="fade-up" data-aos-delay="100">üíï</div>

      <div class="timeline">
        <div class="timeline-item" data-aos="fade-right" data-aos-delay="0">
          <div class="timeline-dot">üåü</div>
          <div class="timeline-card">
            <p class="timeline-date">The Beginning</p>
            <h3 class="timeline-title">Cambridge ‚Äî A Czech Girl & A Welsh Boy</h3>
            <p class="timeline-text">You came from Czech, I came from Swansea, and somehow we both ended up in Cambridge. Young, stupid, and with no idea that meeting each other would change everything.</p>
          </div>
        </div>
        <div class="timeline-item" data-aos="fade-left" data-aos-delay="150">
          <div class="timeline-dot">üçù</div>
          <div class="timeline-card">
            <p class="timeline-date">First Date</p>
            <h3 class="timeline-title">The Lasagne That Changed Everything</h3>
            <p class="timeline-text">I made you a lasagne. That was it ‚Äî you were won over and our lives were never the same again. Who knew a home-cooked meal was all it took?</p>
          </div>
        </div>
        <div class="timeline-item" data-aos="fade-right" data-aos-delay="300">
          <div class="timeline-dot">üíó</div>
          <div class="timeline-card">
            <p class="timeline-date">The Moment</p>
            <h3 class="timeline-title">Singing Kooks on the Sand Dunes</h3>
            <p class="timeline-text">Travelling together, standing on the sand dunes of the Netherlands, singing Kooks at the top of our lungs. That was the moment we truly fell for each other ‚Äî no going back.</p>
          </div>
        </div>
        <div class="timeline-item" data-aos="fade-left" data-aos-delay="450">
          <div class="timeline-dot">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
          <div class="timeline-card">
            <p class="timeline-date">Today & Forever</p>
            <h3 class="timeline-title">Our Beautiful Family</h3>
            <p class="timeline-text">Now we have our beautiful kids and our little family. Working it out every day, making each other happy, and building a life that's perfectly ours.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- PHOTO CAROUSEL -->
    <section class="section-carousel">
      <h2 class="section-title" data-aos="fade-up">Our Little Family</h2>
      <div class="section-divider" data-aos="fade-up" data-aos-delay="100">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>

      <div class="swiper hero-swiper" data-aos="fade-up" data-aos-delay="200">
        <div class="swiper-wrapper">
          <div class="swiper-slide">
            <a href="photos/hero-1.jpg" class="glightbox" data-gallery="carousel" data-glightbox="title: Our beautiful family">
              <img src="photos/hero-1.jpg" alt="Family photo 1" loading="lazy" />
            </a>
            <p class="slide-caption">Our beautiful family</p>
          </div>
          <div class="swiper-slide">
            <a href="photos/hero-2.jpg" class="glightbox" data-gallery="carousel" data-glightbox="title: Family adventures">
              <img src="photos/hero-2.jpg" alt="Family photo 2" loading="lazy" />
            </a>
            <p class="slide-caption">Family adventures</p>
          </div>
          <div class="swiper-slide">
            <a href="photos/hero-3.jpg" class="glightbox" data-gallery="carousel" data-glightbox="title: The kids making us laugh">
              <img src="photos/hero-3.jpg" alt="Family photo 3" loading="lazy" />
            </a>
            <p class="slide-caption">The kids making us laugh</p>
          </div>
          <div class="swiper-slide">
            <a href="photos/hero-4.jpg" class="glightbox" data-gallery="carousel" data-glightbox="title: Family day out">
              <img src="photos/hero-4.jpg" alt="Family photo 4" loading="lazy" />
            </a>
            <p class="slide-caption">Family day out</p>
          </div>
          <div class="swiper-slide">
            <a href="photos/hero-5.jpg" class="glightbox" data-gallery="carousel" data-glightbox="title: Our little ones">
              <img src="photos/hero-5.jpg" alt="Family photo 5" loading="lazy" />
            </a>
            <p class="slide-caption">Our little ones</p>
          </div>
          <div class="swiper-slide">
            <a href="photos/hero-6.jpg" class="glightbox" data-gallery="carousel" data-glightbox="title: The whole crew">
              <img src="photos/hero-6.jpg" alt="Family photo 6" loading="lazy" />
            </a>
            <p class="slide-caption">The whole crew</p>
          </div>
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
      </div>
    </section>

    <!-- POLAROID PHOTO GRID -->
    <section class="section-memories">
      <h2 class="section-title" data-aos="fade-up">Memories of Us</h2>
      <div class="section-divider" data-aos="fade-up" data-aos-delay="100">üíñ</div>

      <div class="polaroid-grid">
        <div class="polaroid" data-aos="fade-up" data-aos-delay="0" style="--rotate: -3deg; --tape-rotate: 3deg;">
          <a href="photos/memory-01.jpg" class="glightbox" data-gallery="memories" data-glightbox="title: The lasagna of love">
            <img src="photos/memory-01.jpg" alt="Us" loading="lazy" />
          </a>
          <p class="polaroid-caption">The lasagna of love</p>
        </div>
        <div class="polaroid" data-aos="fade-up" data-aos-delay="80" style="--rotate: 2deg; --tape-rotate: -1deg;">
          <a href="photos/memory-02.jpg" class="glightbox" data-gallery="memories" data-glightbox="title: Punting in Cambridge">
            <img src="photos/memory-02.jpg" alt="Us" loading="lazy" />
          </a>
          <p class="polaroid-caption">Punting in Cambridge</p>
        </div>
        <div class="polaroid" data-aos="fade-up" data-aos-delay="160" style="--rotate: -1deg; --tape-rotate: 2deg;">
          <a href="photos/memory-03.jpg" class="glightbox" data-gallery="memories" data-glightbox="title: Vanstomp laughs">
            <img src="photos/memory-03.jpg" alt="Us" loading="lazy" />
          </a>
          <p class="polaroid-caption">Vanstomp laughs</p>
        </div>
        <div class="polaroid" data-aos="fade-up" data-aos-delay="240" style="--rotate: 3deg; --tape-rotate: -3deg;">
          <a href="photos/memory-04.jpg" class="glightbox" data-gallery="memories" data-glightbox="title: Day out with friends">
            <img src="photos/memory-04.jpg" alt="Us" loading="lazy" />
          </a>
          <p class="polaroid-caption">Day out with friends</p>
        </div>
        <div class="polaroid" data-aos="fade-up" data-aos-delay="0" style="--rotate: 2deg; --tape-rotate: 1deg;">
          <a href="photos/memory-05.jpg" class="glightbox" data-gallery="memories" data-glightbox="title: The Netherlands">
            <img src="photos/memory-05.jpg" alt="Us" loading="lazy" />
          </a>
          <p class="polaroid-caption">The Netherlands</p>
        </div>
        <div class="polaroid" data-aos="fade-up" data-aos-delay="80" style="--rotate: -2deg; --tape-rotate: -2deg;">
          <a href="photos/memory-06.jpg" class="glightbox" data-gallery="memories" data-glightbox="title: Beach walks with kooks">
            <img src="photos/memory-06.jpg" alt="Us" loading="lazy" />
          </a>
          <p class="polaroid-caption">Beach walks with kooks</p>
        </div>
        <div class="polaroid" data-aos="fade-up" data-aos-delay="160" style="--rotate: 1deg; --tape-rotate: 3deg;">
          <a href="photos/memory-07.jpg" class="glightbox" data-gallery="memories" data-glightbox="title: D√ºsseldorf adventures">
            <img src="photos/memory-07.jpg" alt="Us" loading="lazy" />
          </a>
          <p class="polaroid-caption">D√ºsseldorf adventures</p>
        </div>
        <div class="polaroid" data-aos="fade-up" data-aos-delay="240" style="--rotate: -3deg; --tape-rotate: -1deg;">
          <a href="photos/memory-08.jpg" class="glightbox" data-gallery="memories" data-glightbox="title: Christmas fun">
            <img src="photos/memory-08.jpg" alt="Us" loading="lazy" />
          </a>
          <p class="polaroid-caption">Christmas fun</p>
        </div>
        <div class="polaroid" data-aos="fade-up" data-aos-delay="0" style="--rotate: -1deg; --tape-rotate: 2deg;">
          <a href="photos/memory-09.jpg" class="glightbox" data-gallery="memories" data-glightbox="title: cozy üçÄgreen nights">
            <img src="photos/memory-09.jpg" alt="Us" loading="lazy" />
          </a>
          <p class="polaroid-caption">cozy üçÄgreen nights</p>
        </div>
        <div class="polaroid" data-aos="fade-up" data-aos-delay="80" style="--rotate: 2deg; --tape-rotate: -2deg;">
          <a href="photos/memory-10.jpg" class="glightbox" data-gallery="memories" data-glightbox="title: Sunset on the beach">
            <img src="photos/memory-10.jpg" alt="Us" loading="lazy" />
          </a>
          <p class="polaroid-caption">Sunset on the beach</p>
        </div>
        <div class="polaroid" data-aos="fade-up" data-aos-delay="160" style="--rotate: -2deg; --tape-rotate: 1deg;">
          <a href="photos/memory-11.jpg" class="glightbox" data-gallery="memories" data-glightbox="title: Czech adventures">
            <img src="photos/memory-11.jpg" alt="Us" loading="lazy" />
          </a>
          <p class="polaroid-caption">Czech adventures</p>
        </div>
        <div class="polaroid" data-aos="fade-up" data-aos-delay="240" style="--rotate: 1deg; --tape-rotate: -3deg;">
          <a href="photos/memory-12.jpg" class="glightbox" data-gallery="memories" data-glightbox="title: Food fun">
            <img src="photos/memory-12.jpg" alt="Us" loading="lazy" />
          </a>
          <p class="polaroid-caption">Food fun</p>
        </div>
      </div>
    </section>

    <!-- REASONS I LOVE YOU -->
    <section class="section-reasons">
      <h2 class="section-title" data-aos="fade-up">Reasons I Love You</h2>
      <div class="section-divider" data-aos="fade-up" data-aos-delay="100">‚ú®</div>

      <div class="reasons-grid">
        <div class="reason-card" data-aos="fade-up" data-aos-delay="0">
          <span class="reason-emoji">üòä</span>
          <h3 class="reason-title">Our Laughs Together</h3>
          <p class="reason-text">Even during the hard days, we laugh, we smile, you make me happier</p>
        </div>
        <div class="reason-card" data-aos="fade-up" data-aos-delay="100">
          <span class="reason-emoji">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
          <h3 class="reason-title">Our Beautiful Kids</h3>
          <p class="reason-text">Without a doubt our kids are the best of us</p>
        </div>
        <div class="reason-card" data-aos="fade-up" data-aos-delay="200">
          <span class="reason-emoji">üí™</span>
          <h3 class="reason-title">Your Strength</h3>
          <p class="reason-text">How you handle everything with grace inspires me endlessly, where I struggle, you grow!</p>
        </div>
        <div class="reason-card" data-aos="fade-up" data-aos-delay="300">
          <span class="reason-emoji">ü§ó</span>
          <h3 class="reason-title">Your Kindness</h3>
          <p class="reason-text">The way you care for everyone around you is truly special and perfect</p>
        </div>
        <div class="reason-card" data-aos="fade-up" data-aos-delay="400">
          <span class="reason-emoji">üåô</span>
          <h3 class="reason-title">Fun Times</h3>
          <p class="reason-text">Where ever we are, we find the fun in life</p>
        </div>
        <div class="reason-card" data-aos="fade-up" data-aos-delay="500">
          <span class="reason-emoji">üè†</span>
          <h3 class="reason-title">You Feel Like Home</h3>
          <p class="reason-text">Wherever you are, that's where I belong</p>
        </div>
      </div>
    </section>

    <!-- LOVE LETTER -->
    <section class="section-letter">
      <div class="letter-wrapper" data-aos="fade-up" data-aos-duration="1500">
        <div class="letter-container">
          <div class="letter-wax-seal">üíå</div>
          <div class="letter-decoration">üíå</div>
          <h2 class="letter-title">A Letter For You</h2>
          <div class="letter-body">
            <p class="letter-greeting">Dear Kiki,</p>
            <p>Write your personal love letter here. Tell her how much she means to you, share your favorite memories, and let her know why she's the one.</p>
            <p>Every day with you is an adventure, and I wouldn't trade a single moment. You make everything brighter just by being you.</p>
            <p>Here's to us, to every laugh, every late-night talk, and every little thing that makes us... us.</p>
            <p class="letter-signature">With all my love,<br/>Forever Yours üíï</p>
          </div>
        </div>
      </div>
    </section>

    <!-- PROMISE -->
    <section class="section-promise">
      <div class="promise-card" data-aos="zoom-in" data-aos-duration="1200">
        <span class="promise-emoji">‚ôæÔ∏è</span>
        <h2 class="promise-title">My Promise To You</h2>
        <p class="promise-text">To choose you every single day. To love you in the quiet moments and the loud ones. To be your partner, your best friend, and your biggest fan, making this work and for our small family to always be happy and safe ‚Äî always.</p>
        <div class="promise-hearts">üíï üíó üíï</div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="section-footer">
      <div class="footer-hearts">üíï üíó üíï</div>
      <p class="footer-text">Made with love for my Kiki</p>
      <div class="footer-divider"></div>
      <p class="footer-year">Valentine's Day 2026</p>
    </footer>

  </div>

  <!-- MUSIC TOGGLE -->
  <button id="music-toggle" class="music-btn" aria-label="Toggle music">üéµ</button>
  <!-- BACK TO TOP -->
  <button id="back-to-top" class="back-to-top" aria-label="Back to top">‚Üë</button>
  <!-- Replace the src below with your own romantic song file -->
  <audio id="bgMusic" loop preload="none">
    <source src="music/romantic-song.mp3" type="audio/mpeg" />
  </audio>

  <!-- Sounds -->
  <audio id="hoverSound" src="https://assets.mixkit.co/sfx/preview/mixkit-cartoon-voice-laugh-343.mp3"></audio>
  <audio id="yesSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3"></audio>

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/js/glightbox.min.js"></script>

  <script>
    /* ============================================
       PROPOSAL CARD LOGIC
       ============================================ */
    const noBtn = document.getElementById("no");
    const yesBtn = document.getElementById("yes");
    const card = document.querySelector(".card");
    const hoverSound = document.getElementById("hoverSound");
    const yesSound = document.getElementById("yesSound");

    // No button evasion (mouse)
    noBtn.addEventListener("mouseenter", evadeNo);
    // No button evasion (touch)
    noBtn.addEventListener("touchstart", function(e) {
      e.preventDefault();
      evadeNo();
    });

    function evadeNo() {
      hoverSound.currentTime = 0;
      hoverSound.play();

      const cardRect = card.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();

      const maxX = cardRect.width - btnRect.width - 10;
      const maxY = cardRect.height - btnRect.height - 10;

      noBtn.style.left = Math.random() * maxX + "px";
      noBtn.style.top = Math.random() * maxY + "px";
    }

    /* ============================================
       YES BUTTON ‚Üí ENHANCED TRANSITION
       ============================================ */
    yesBtn.addEventListener("click", () => {
      yesSound.play();

      // Multi-stage confetti celebration
      try {
        const colors = ['#ff4d6d', '#ff9a9e', '#fbc2eb', '#a18cd1', '#fad0c4', '#ff758f'];
        const heartShapes = confetti.shapeFromText({ text: '‚ù§Ô∏è', scalar: 2 });

        // Burst 1: Big center explosion
        confetti({
          particleCount: 200,
          spread: 130,
          origin: { y: 0.6 },
          colors: colors,
          ticks: 200
        });

        // Burst 2: Heart-shaped confetti
        setTimeout(() => {
          confetti({
            particleCount: 40,
            spread: 80,
            origin: { y: 0.55 },
            shapes: [heartShapes],
            scalar: 2,
            ticks: 200
          });
        }, 250);

        // Burst 3: Side cannons
        setTimeout(() => {
          confetti({
            particleCount: 100,
            angle: 60,
            spread: 55,
            origin: { x: 0, y: 0.6 },
            colors: colors
          });
          confetti({
            particleCount: 100,
            angle: 120,
            spread: 55,
            origin: { x: 1, y: 0.6 },
            colors: colors
          });
        }, 500);

        // Burst 4: Gentle rain
        setTimeout(() => {
          confetti({
            particleCount: 80,
            spread: 160,
            origin: { y: 0 },
            gravity: 0.6,
            ticks: 300,
            colors: colors
          });
        }, 800);
      } catch (e) {
        // Fallback confetti if shapeFromText not supported
        confetti({ particleCount: 200, spread: 120, origin: { y: 0.6 } });
      }

      // Screen flash
      setTimeout(() => {
        document.getElementById('screenFlash').classList.add('screen-flash--active');
      }, 600);

      // Card exit
      setTimeout(() => {
        card.classList.add("card--exit");
      }, 900);

      // Switch to experience mode
      setTimeout(() => {
        card.style.display = "none";
        document.body.classList.add("experience-mode");

        const experience = document.getElementById("valentine-experience");
        experience.style.display = "block";

        // Force reflow, then animate in
        experience.offsetHeight;
        experience.classList.add("experience--active");

        // Scroll to top
        window.scrollTo({ top: 0, behavior: "instant" });

        // Show scroll progress
        document.getElementById('scrollProgress').style.display = 'block';

        // Initialize everything
        initSwiper();
        initAOS();
        initGLightbox();
        initSparkles();
        initMusicToggle();
        initScrollProgress();
        initHeroParticles();
        initBackToTop();
      }, 1600);
    });

    /* ============================================
       SWIPER INITIALIZATION
       ============================================ */
    function initSwiper() {
      var heroSwiper = new Swiper(".hero-swiper", {
        slidesPerView: 1.3,
        centeredSlides: true,
        spaceBetween: 24,
        grabCursor: true,
        loop: true,
        speed: 600,
        pagination: {
          el: ".swiper-pagination",
          clickable: true
        },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev"
        },
        autoplay: {
          delay: 1800,
          disableOnInteraction: false,
          pauseOnMouseEnter: true
        },
        breakpoints: {
          768: {
            slidesPerView: 1.5,
            spaceBetween: 30
          },
          1024: {
            slidesPerView: 1.8,
            spaceBetween: 36
          }
        }
      });

      // Force autoplay to start after layout settles
      setTimeout(function() {
        heroSwiper.update();
        heroSwiper.autoplay.start();
      }, 300);
    }

    /* ============================================
       AOS INITIALIZATION
       ============================================ */
    function initAOS() {
      AOS.init({
        duration: 900,
        easing: "ease-out-cubic",
        once: true,
        offset: 80
      });
    }

    /* ============================================
       GLIGHTBOX INITIALIZATION
       ============================================ */
    function initGLightbox() {
      GLightbox({
        touchNavigation: true,
        loop: true,
        closeOnOutsideClick: true
      });
    }

    /* ============================================
       SPARKLE CURSOR TRAIL
       ============================================ */
    function initSparkles() {
      const sparkleEmojis = ["‚ú®", "üíñ", "‚≠ê", "üíó", "üåü", "üíï"];
      document.addEventListener("mousemove", (e) => {
        if (Math.random() > 0.25) return;
        const sparkle = document.createElement("div");
        sparkle.className = "sparkle";
        sparkle.textContent = sparkleEmojis[Math.floor(Math.random() * sparkleEmojis.length)];
        sparkle.style.left = (e.clientX + (Math.random() - 0.5) * 20) + "px";
        sparkle.style.top = (e.clientY + (Math.random() - 0.5) * 20) + "px";
        document.body.appendChild(sparkle);
        setTimeout(() => sparkle.remove(), 900);
      });
    }

    /* ============================================
       MUSIC TOGGLE
       ============================================ */
    function initMusicToggle() {
      const musicBtn = document.getElementById("music-toggle");
      const bgMusic = document.getElementById("bgMusic");
      bgMusic.volume = 0.3;

      musicBtn.style.display = "block";

      musicBtn.addEventListener("click", () => {
        if (bgMusic.paused) {
          bgMusic.play().catch(() => {});
          musicBtn.textContent = "üéµ";
          musicBtn.classList.add("playing");
        } else {
          bgMusic.pause();
          musicBtn.textContent = "üîá";
          musicBtn.classList.remove("playing");
        }
      });
    }

    /* ============================================
       SCROLL PROGRESS BAR
       ============================================ */
    function initScrollProgress() {
      const progressBar = document.getElementById('scrollProgress');

      window.addEventListener('scroll', () => {
        const scrollTop = window.scrollY;
        const docHeight = document.documentElement.scrollHeight - window.innerHeight;
        const scrollPercent = (scrollTop / docHeight) * 100;
        progressBar.style.width = scrollPercent + '%';
      });
    }

    /* ============================================
       HERO PARTICLES CANVAS
       ============================================ */
    function initHeroParticles() {
      const canvas = document.getElementById('heroParticles');
      if (!canvas) return;
      const ctx = canvas.getContext('2d');
      const heroSection = document.getElementById('heroSection');

      function resize() {
        canvas.width = heroSection.offsetWidth;
        canvas.height = heroSection.offsetHeight;
      }
      resize();
      window.addEventListener('resize', resize);

      const particles = [];
      const particleCount = 35;

      for (let i = 0; i < particleCount; i++) {
        particles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          size: Math.random() * 3 + 1,
          speedX: (Math.random() - 0.5) * 0.5,
          speedY: (Math.random() - 0.5) * 0.5,
          opacity: Math.random() * 0.4 + 0.1
        });
      }

      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        particles.forEach(p => {
          p.x += p.speedX;
          p.y += p.speedY;

          if (p.x < 0) p.x = canvas.width;
          if (p.x > canvas.width) p.x = 0;
          if (p.y < 0) p.y = canvas.height;
          if (p.y > canvas.height) p.y = 0;

          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
          ctx.fillStyle = `rgba(255, 255, 255, ${p.opacity})`;
          ctx.fill();
        });

        // Draw connections between close particles
        for (let i = 0; i < particles.length; i++) {
          for (let j = i + 1; j < particles.length; j++) {
            const dx = particles[i].x - particles[j].x;
            const dy = particles[i].y - particles[j].y;
            const dist = Math.sqrt(dx * dx + dy * dy);

            if (dist < 120) {
              ctx.beginPath();
              ctx.strokeStyle = `rgba(255, 255, 255, ${0.06 * (1 - dist / 120)})`;
              ctx.lineWidth = 1;
              ctx.moveTo(particles[i].x, particles[i].y);
              ctx.lineTo(particles[j].x, particles[j].y);
              ctx.stroke();
            }
          }
        }

        requestAnimationFrame(animate);
      }

      animate();
    }

    /* ============================================
       BACK TO TOP BUTTON
       ============================================ */
    function initBackToTop() {
      const btn = document.getElementById('back-to-top');
      btn.style.display = 'block';

      window.addEventListener('scroll', () => {
        if (window.scrollY > 500) {
          btn.classList.add('visible');
        } else {
          btn.classList.remove('visible');
        }
      });

      btn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }

    /* ============================================
       FLOATING HEARTS (background)
       ============================================ */
    const heartEmojis = ['‚ù§Ô∏è', 'üíó', 'üíï', 'üíñ', 'ü©∑'];
    function createHeart() {
      const heart = document.createElement("div");
      heart.className = "heart";
      heart.innerHTML = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.fontSize = Math.random() * 22 + 14 + "px";
      heart.style.animationDuration = Math.random() * 3 + 4 + "s";
      heart.style.opacity = Math.random() * 0.4 + 0.3;

      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 8000);
    }

    setInterval(createHeart, 400);
  </script>

</body>
</html>

